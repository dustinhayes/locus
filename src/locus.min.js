void function (win) {var doc = win.document, loc = win.location, wtls = ['protocol', 'hostname', 'pathname', 'search', 'hash', 'href'], pick = function (hash, subs) {var ret = {}, add = function (prop) {ret[prop] = hash[prop]; }; return (typeof subs === 'string' ? hash[subs] : (subs.forEach(add), ret) ); }, eqls = function (subj, test, subs) {var check = function (prop) {return test[prop] === subj[prop]; }; subs = subs || Object.keys(subj); return (typeof subs === 'string' ? check(subs) : subs.every(check) ); }, sim = {set: function (path) {this.anc.href = path; return this; }, get: function (subs) {return pick(this.anc, subs || wtls ); }, same: function (subs) {return eqls(pick(loc, wtls), this.anc, subs ); }, diff: function (subs) {return !(this.same(subs) ); } }, locus = {new: function () {return Object.create(sim, {anc: {value: doc.createElement('a'), } }); } }; win.locus = locus; }(window);